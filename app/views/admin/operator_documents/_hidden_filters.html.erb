<style>
  li[aria-disabled='true'] {
    display: none;
  }
</style>
<script>
  const filters = <%= raw(filter.to_json) %>;

  $('#q_required_operator_document_country_id').on('change', onChangeCountry);

  function onChangeCountry(e) {
    const countryId = e.target.value;

    // Update Operator
    const operators = filters.countries.operators[countryId];
    Array.from($('#q_operator_id').select2()[0].options).forEach( op => {
      if(countryId === "") {
        $(op).prop('disabled', false);
      } else {
        if (operators == undefined || !operators.includes(parseInt(op.value))) {
          $(op).prop('disabled',true);
        } else {
          $(op).prop('disabled',false);
        }
      }
    });
    $('#q_operator_id').val("");
    $('#q_operator_id').trigger('change');
  }
</script>